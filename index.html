<!DOCTYPE html>
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Twitch TV</title>
    <script src = "https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  </head>
  <body>
    <script type="text/javascript">
    var remoteUrlWithOrigin = "https://gist.githubusercontent.com/QuincyLarson/2ff6892f948d0b7118a99264fd9c1ce8/raw/e9e12f154d71cf77fc32e94e990749a7383ca2d6/Twitch%2520sample%2520API%2520responses%2520in%2520array%2520form";

    $.ajax( {
        url: remoteUrlWithOrigin,
        dataType: 'json',
        type: 'GET',
        success: function(data) {
          var template  = $("#list_item").html();

          //console.log(data);
          data.forEach(function (channel){
            var listItem = $(template);
            if (channel.stream != null) {
              var name = channel.stream.display_name;
              var status = "online";
            }
            else {
              var name = channel.display_name
              var status = "offline";
            }

            if (!channel.error) {
              $(listItem).find(".name").text(name);
              $(listItem).find(".status").text(status);

              console.log($(listItem));

              $("#results").append($(listItem));

            }

            //console.log($(listItem));
          });
        }
      });
        </script>

        <h3>Channels</h3>
        <ul id="results"> </ul>


 <script type="text/template" id="list_item">
    <li>
       <a class="name"></a>
      <h4 class="status"></h4>
    </li>
  </script>

    </script>
  </body>
</html>
